{"version":3,"file":"AdminLogin-20816e2f.js","sources":["../../../src/views/AdminLogin.vue","../../../../../../logo.png"],"sourcesContent":["<script lang=\"ts\">\nexport default {\n    data() {\n        return {\n            rules: {\n                required: (value: string) => !!value || 'Dieses Feld ist erforderlich.'\n            },\n            username: \"\",\n            password: \"\",\n            button: {\n                loading: false,\n                disabled: false\n            },\n            error: {\n                show: false,\n                message: \"\"\n            }\n        };\n    },\n    methods: {\n        async login() {\n            // disable login button to prevent spamming\n            // show loading indicator\n            // clear error message\n\n            this.button.disabled = true;\n            this.button.loading = true;\n            const result = await fetch(\"/admin-login\", {\n                method: \"post\",\n                headers: {\n                    \"Content-Type\": \"application/json\"\n                },\n                body: JSON.stringify({\n                    username: this.username,\n                    password: this.password\n                })\n            }).catch(() => {\n                this.button.disabled = false;\n                this.button.loading = false;\n                this.error.message = \"Verbindung zum Server ist fehlgeschlagen!\"\n                this.error.show = true;\n            })\n\n            if (!result) return;\n\n            if (result.status !== 200) {\n                this.button.disabled = false;\n                this.button.loading = false;\n                this.error.message = \"Login fehlgeschlagen!\"\n                this.error.show = true;\n            } else {\n                this.$router.push(\"/admin\");\n            }\n        }\n    },\n    beforeMount() {\n        this.button.loading = true;\n        fetch(\"/checkaccess\", { method: \"GET\" })\n            .then((response) => {\n                if (response.status === 200) {\n                    this.$router.push(\"/home\");\n                    return;\n                }\n                this.button.loading = false;\n            })\n    }\n};\n</script>\n\n\n<template>\n    <div class=\"login-wrapper\">\n        <v-form id=\"loginform\" @submit.prevent=\"login()\">\n            <img class=\"logo\" src=\"/logo.png\" alt=\"Dolphin School\" />\n            <h1>Login</h1>\n            <v-alert v-if=\"error.show\" color=\"error\" :title=\"error.message\"></v-alert>\n            <v-text-field v-model=\"username\" clearable label=\"Benutzername\" density=\"compact\" :rules=\"[rules.required]\"\n                name=\"username\" />\n            <v-text-field v-model=\"password\" type=\"password\" clearable label=\"Passwort\" density=\"compact\"\n                :rules=\"[rules.required]\" name=\"password\" />\n            <v-btn type=\"submit\" variant=\"tonal\" width=\"100%\" :disabled=\"button.disabled\"\n                :loading=\"button.loading\">Login</v-btn>\n        </v-form>\n    </div>\n</template>\n\n<style scoped>\n@import url(\"../assets/login.css\");\n</style>","export default \"__VITE_PUBLIC_ASSET__8175e357__\""],"names":["_sfc_main","value","result","response","_imports_0","_withScopeId","n","_pushScopeId","_popScopeId","_hoisted_1","_hoisted_2","_createElementVNode","_component_v_form","_resolveComponent","_openBlock","_createElementBlock","_createVNode","_cache","_withModifiers","$event","$options","_withCtx","_createBlock","_component_v_alert","_component_v_text_field","$data","_component_v_btn"],"mappings":"uHACA,MAAeA,EAAA,CACX,MAAO,CACI,MAAA,CACH,MAAO,CACH,SAAWC,GAAkB,CAAC,CAACA,GAAS,+BAC5C,EACA,SAAU,GACV,SAAU,GACV,OAAQ,CACJ,QAAS,GACT,SAAU,EACd,EACA,MAAO,CACH,KAAM,GACN,QAAS,EACb,CAAA,CAER,EACA,QAAS,CACL,MAAM,OAAQ,CAKV,KAAK,OAAO,SAAW,GACvB,KAAK,OAAO,QAAU,GAChB,MAAAC,EAAS,MAAM,MAAM,eAAgB,CACvC,OAAQ,OACR,QAAS,CACL,eAAgB,kBACpB,EACA,KAAM,KAAK,UAAU,CACjB,SAAU,KAAK,SACf,SAAU,KAAK,QAAA,CAClB,CAAA,CACJ,EAAE,MAAM,IAAM,CACX,KAAK,OAAO,SAAW,GACvB,KAAK,OAAO,QAAU,GACtB,KAAK,MAAM,QAAU,4CACrB,KAAK,MAAM,KAAO,EAAA,CACrB,EAEIA,IAEDA,EAAO,SAAW,KAClB,KAAK,OAAO,SAAW,GACvB,KAAK,OAAO,QAAU,GACtB,KAAK,MAAM,QAAU,wBACrB,KAAK,MAAM,KAAO,IAEb,KAAA,QAAQ,KAAK,QAAQ,EAElC,CACJ,EACA,aAAc,CACV,KAAK,OAAO,QAAU,GAChB,MAAA,eAAgB,CAAE,OAAQ,KAAA,CAAO,EAClC,KAAMC,GAAa,CACZ,GAAAA,EAAS,SAAW,IAAK,CACpB,KAAA,QAAQ,KAAK,OAAO,EACzB,OAEJ,KAAK,OAAO,QAAU,EAAA,CACzB,CACT,CACJ,EClEeC,EAAA,YDyEH,MAAAC,EAAAC,IAAAC,EAAA,iBAAA,EAAAD,EAAAA,IAAAE,IAAAF,GAAKG,EAAY,CAAA,MAAA,iBAAgBC,EAAAL,EAAA,IAAAM,EAAA,MAAA,CAAC,MAAI,OAAA,IAAAP,iJAF9CQ,EAAAC,EAYM,QAZN,SACeC,EAAW,EAAAC,EAAA,MAAAN,EAAA,CAAQO,EAAAJ,EAAA,CAAA,GAAA,wBAC1B,IAAyDK,EAAA,CAAA,EAAAC,EAAAC,GAAAC,EAAA,MAAA,EAAA,CAAA,SAAA,CAAA,EAAA,EAAA,SACzDC,EAAc,IAAA,CAAAX,sBAC0BY,EAAAC,EAAA,CAAE,IAAK,EAAA,MAAA,6BAC/C,EAAA,KACsB,gBADC,GAAQ,EAAA,EAAAP,EAAAQ,EAAA,CAAE,WAASC,EAAA,SAAC,sBAAoBR,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAE,GAAAM,EAAA,SAAAN,GAAC,UAAQ,GAAW,MAAK,eACpF,QAAK,UAAA,MAAA,CAAAM,EAAA,MAAA,QAAA,EACT,KAAA,UAAA,EAAA,KAAA,EAAA,CAAA,aAAuB,OAAQ,CAAA,EAAAT,EAAAQ,EAAA,CAAE,WAAKC,EAAU,SAAC,sBAASR,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAE,GAAAM,EAAA,SAAAN,GAAC,KAAK,WAAY,UAAQ,GAC/E,MAAK,WAAoB,QAAK,UAAA,MAAA,CAAAM,EAAA,MAAA,QAAA,EACnC,KAAA,UAAA,EAAO,KAAK,EAAQ,CAAA,aAAA,OAAA,CAAA,EAAAT,EAASU,EAAO,CAAC,KAAK,SAAS,QAAQ,QACtD,MAAO,OAAA,SAAAD,EAAA,OAAA,SAAuB,QAAAA,EAAA,OAAA,OAAA,EAAA"}