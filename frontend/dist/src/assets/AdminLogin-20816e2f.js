import{_ as f,r,o as a,e as _,a as n,w as i,k as g,c as b,h as w,b as v,p as y,j as V,g as d}from"./index-d0402e1b.js";const x={data(){return{rules:{required:e=>!!e||"Dieses Feld ist erforderlich."},username:"",password:"",button:{loading:!1,disabled:!1},error:{show:!1,message:""}}},methods:{async login(){this.button.disabled=!0,this.button.loading=!0;const e=await fetch("/admin-login",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:this.username,password:this.password})}).catch(()=>{this.button.disabled=!1,this.button.loading=!1,this.error.message="Verbindung zum Server ist fehlgeschlagen!",this.error.show=!0});e&&(e.status!==200?(this.button.disabled=!1,this.button.loading=!1,this.error.message="Login fehlgeschlagen!",this.error.show=!0):this.$router.push("/admin"))}},beforeMount(){this.button.loading=!0,fetch("/checkaccess",{method:"GET"}).then(e=>{if(e.status===200){this.$router.push("/home");return}this.button.loading=!1})}},S="/logo.png";const u=e=>(y("data-v-f233fad4"),e=e(),V(),e),k={class:"login-wrapper"},B=u(()=>d("img",{class:"logo",src:S,alt:"Dolphin School"},null,-1)),L=u(()=>d("h1",null,"Login",-1));function N(e,t,C,I,s,c){const m=r("v-alert"),l=r("v-text-field"),p=r("v-btn"),h=r("v-form");return a(),_("div",k,[n(h,{id:"loginform",onSubmit:t[2]||(t[2]=g(o=>c.login(),["prevent"]))},{default:i(()=>[B,L,s.error.show?(a(),b(m,{key:0,color:"error",title:s.error.message},null,8,["title"])):w("",!0),n(l,{modelValue:s.username,"onUpdate:modelValue":t[0]||(t[0]=o=>s.username=o),clearable:"",label:"Benutzername",density:"compact",rules:[s.rules.required],name:"username"},null,8,["modelValue","rules"]),n(l,{modelValue:s.password,"onUpdate:modelValue":t[1]||(t[1]=o=>s.password=o),type:"password",clearable:"",label:"Passwort",density:"compact",rules:[s.rules.required],name:"password"},null,8,["modelValue","rules"]),n(p,{type:"submit",variant:"tonal",width:"100%",disabled:s.button.disabled,loading:s.button.loading},{default:i(()=>[v("Login")]),_:1},8,["disabled","loading"])]),_:1})])}const T=f(x,[["render",N],["__scopeId","data-v-f233fad4"]]);export{T as default};
//# sourceMappingURL=AdminLogin-20816e2f.js.map
